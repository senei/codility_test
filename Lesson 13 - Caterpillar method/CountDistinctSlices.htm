<!DOCTYPE html>
<html>

<head>
    <title>CountDistinctSlices - codility</title>
    <meta charset="UTF-8">
    <meta name="description" content="Count the number of distinct slices (containing only unique numbers).">
    <meta name="author" content="senei">
</head>

<script type="text/javascript">
function solution(M, A) {
    var len = A.length,
        ans = Array(),
        res = 0,
        ind = 0,
        i = 0;
    for (i = 0; i <= M; i++) {
        ans[i] = -1;
    }

    for (i = 0; i < len; i++) {
        if (ans[A[i]] == -1) {
            ans[A[i]] = i;
        } else {
            new_ind = ans[A[i]] + 1;
            res += (new_ind - ind) * (i - ind + i - new_ind + 1) / 2;
            if (res > 1000000000) return 1000000000;
            for (j = ind; j < new_ind; j++) {
                ans[A[j]] = -1;
            }
            ans[A[i]] = i;
            ind = new_ind;
        }
    }
    res += (len - ind) * (len - ind + 1) / 2;
    if (res > 1000000000) res = 1000000000;

    return res;
}
</script>

<body>
    <p>Task name: CountDistinctSlices
        <br/>Count the number of distinct slices (containing only unique numbers).</p>
    <br/>
    <a href="https://codility.com/programmers/lessons/13">codility.com/programmers/lessons/13</a>
    <br/>
    <p>
        An integer M and a non-empty zero-indexed array A consisting of N non-negative integers are given. All integers in array A are less than or equal to M.
    </p>
    <p>
        A pair of integers (P, Q), such that 0 ≤ P ≤ Q &lt; N, is called a slice of array A. The slice consists of the elements A[P], A[P + 1], ..., A[Q]. A distinct slice is a slice consisting of only unique numbers. That is, no individual number occurs more than once in the slice.</p>
    <p>
        For example, consider integer M = 6 and array A such that:</p>
    <code>A[0] = 3
        <br/>A[1] = 4
        <br/>A[2] = 5
        <br/>A[3] = 5
        <br/>A[4] = 2
    </code>
    <p>There are exactly nine distinct slices: (0, 0), (0, 1), (0, 2), (1, 1), (1, 2), (2, 2), (3, 3), (3, 4) and (4, 4).</p>
    <p>The goal is to calculate the number of distinct slices.</p>
    <p>Write a function:</p>
    <code>function solution(M, A);</code>
    <p>that, given an integer M and a non-empty zero-indexed array A consisting of N integers, returns the number of distinct slices.</p>
    <p>If the number of distinct slices is greater than 1,000,000,000, the function should return 1,000,000,000.</p>
    <p>For example, given integer M = 6 and array A such that:</p>
    <code>
        A[0] = 3
        <br/>A[1] = 4
        <br/>A[2] = 5
        <br/>A[3] = 5
        <br/>A[4] = 2
    </code>
    <p>the function should return 9, as explained above.</p>


</body>

</html>
